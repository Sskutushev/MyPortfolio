# Документация по тестированию

## Стек тестирования

Для обеспечения качества и надежности кода используется следующий набор инструментов:

- **[Vitest](https://vitest.dev/):** Современный и быстрый фреймворк для тестирования, совместимый с Vite.
- **[React Testing Library](https://testing-library.com/docs/react-testing-library/intro/):** Библиотека для тестирования React-компонентов, ориентированная на взаимодействие с пользователем.
- **[jest-dom](https://github.com/testing-library/jest-dom):** Добавляет кастомные матчеры для Jest/Vitest для упрощения работы с DOM.
- **[user-event](https://testing-library.com/docs/user-event/intro):** Симулирует реальные события пользователя (клики, ввод текста) для более надежных тестов.
- **[Axe-core](https://github.com/dequelabs/axe-core):** Движок для автоматического тестирования доступности (accessibility).
- **[Playwright](https://playwright.dev/):** Инструмент для E2E тестирования с поддержкой множества браузеров.

## Текущий статус

✅ **Все тесты (Unit, E2E, Accessibility) на 100% успешно проходят в CI/CD пайплайне.**

## Настройка

- **`vitest.config.ts`:** Основной файл конфигурации для Vitest. Он настраивает тестовую среду (jsdom), глобальные переменные и пути.
- **`src/test/setup.ts`:** Файл для глобальной настройки тестов. Здесь импортируются матчеры `jest-dom` и настраиваются моки для глобальных API, таких как `matchMedia` и `IntersectionObserver`, чтобы компоненты, использующие их, корректно работали в тестовой среде.
- **`src/test/test-utils.tsx`:** Утилиты для тестирования с провайдерами, оборачивающие тестируемые компоненты в `BrowserRouter`, `ThemeProvider` и `I18nextProvider` для упрощения тестирования.

## Типы тестов

### Unit-тесты и Интеграционные тесты

- **Что тестируется:** Отдельные компоненты (`Button`, `Card`) и их интеграция в более крупные секции (`Header`, `ContactSection`).
- **Цель:** Проверить, что компоненты корректно рендерятся, отображают переданные данные и правильно реагируют на действия пользователя (клики, ввод данных).

### Тесты на доступность (Accessibility, a11y)

- **Что тестируется:** Соответствие компонентов стандартам WCAG.
- **Инструмент:** `axe-core`.
- **Цель:** Убедиться, что в компонентах нет нарушений доступности (например, отсутствующие `aria-label`, недостаточный контраст, некорректная структура).

### E2E тесты

- **Что тестируется:** Критические пользовательские сценарии в реальном браузере (Chrome, Firefox, WebKit).
- **Инструмент:** Playwright.
- **Цель:** Проверить, что вся система работает правильно от начала и до конца, включая навигацию, взаимодействие с формами и модальными окнами.

## Запуск тестов

В `package.json` определены следующие скрипты для запуска тестов:

- **Запуск всех тестов в watch-режиме:**

  ```bash
  npm run test
  ```

- **Запуск тестов с UI (удобный графический интерфейс для просмотра результатов):**

  ```bash
  npm run test:ui
  ```

- **Запуск тестов с генерацией отчета о покрытии:**

  ```bash
  npm run test:coverage
  ```

  Отчет будет сгенерирован в папке `coverage/`.

- **E2E тесты:**
  ```bash
  npm run test:e2e
  ```

## Покрытие кода

Покрытие кода тестами отслеживается с помощью **Codecov** и регулярно проверяется в CI/CD. Отчет доступен по [ссылке](https://codecov.io/gh/Sskutushev/MyPortfolio).

# Руководство по разработке

## Установка и настройка

### Локальная разработка

1. Клонирование репозитория:

```bash
git clone https://github.com/Sskutushev/portfolio.git
cd portfolio
```

2. Установка зависимостей:

```bash
npm install
```

3. Запуск в режиме разработки:

```bash
npm run dev
```

## Архитектура проекта

### Структура папок

```
src/
├── components/        # React компоненты
│   ├── common/        # Общие компоненты (Button, Card, и т.д.)
│   └── sections/      # Секции сайта (Header, ContactSection и т.д.)
├── contexts/          # React контексты
├── hooks/             # Кастомные React хуки
├── lib/               # Вспомогательные библиотеки
├── pages/             # Страницы приложения
├── styles/            # CSS стили
├── test/              # Тест-утилиты
├── types/             # TypeScript типы
├── utils/             # Вспомогательные функции
└── data/              # Статические данные
```

### Импорты

Используем алиас `@` для импортов из `src`:

```typescript
import { Button } from "@/components/common/Button";
import { useTheme } from "@/contexts/ThemeContext";
import { fadeInUp } from "@/lib/motion-config";
```

## Стиль кода

### TypeScript

- Используйте строгую типизацию
- Определите типы для всех пропсов
- Избегайте использования `any`
- Используйте интерфейсы для объектов

### React

- Используйте функциональные компоненты с хуками
- Предпочитайте `const` вместо `let`
- Используйте деструктуризацию пропсов
- Определяйте интерфейс пропсов над компонентом

### CSS/Tailwind

- Используйте utility классы Tailwind
- Избегайте inline стилей
- Используйте CSS переменные для темы
- Мобильный подход (mobile-first)

## Компонентный подход

### Создание компонентов

1. Определите интерфейс пропсов
2. Используйте именованный экспорт
3. Добавьте документацию при необходимости
4. Напишите тесты

Пример:

```typescript
interface ButtonProps {
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
  onClick?: () => void;
}

export const Button = ({ children, variant = 'primary', onClick }: ButtonProps) => {
  return (
    <button className={`button-${variant}`} onClick={onClick}>
      {children}
    </button>
  );
};
```

### Оптимизация производительности

- Используйте `React.memo` для компонентов, которые рендерятся часто
- Используйте `useMemo` и `useCallback` при необходимости
- Ленивая загрузка компонентов с `React.lazy`

## Тестирование

### Написание тестов

1. Тестируйте пользовательские сценарии
2. Покрывайте граничные случаи
3. Проверяйте ошибки
4. Используйте `userEvent` вместо `fireEvent`

### Типы тестов

- Unit тесты для отдельных компонентов
- Интеграционные тесты для взаимодействия компонентов
- Тесты доступности
- E2E тесты для ключевых сценариев

## Локализация (i18n)

- Используйте `react-i18next` для перевода
- Добавляйте новые строки в `public/locales`
- Используйте `useTranslation` хук для получения перевода

## Темизация

- Используйте `ThemeProvider` и `useTheme` для переключения тем
- Определите CSS переменные для темных и светлых режимов
- Сохраняйте предпочтения пользователя в localStorage

## Анимации

- Используйте Framer Motion для анимаций
- Централизуйте анимации в `src/lib/motion-config.ts`
- Учитывайте `prefers-reduced-motion` для пользователей

## Оптимизации

### Изображения

- Используйте `LazyImage` для изображений вне viewport
- Оптимизируйте изображения перед добавлением
- Используйте WebP формат с fallback
- Убедитесь, что у изображений заданы размеры для предотвращения сдвига макета (CLS)

### Видео

- Используйте `OptimizedVideo` с lazy loading
- Поддерживайте MP4 и WebM форматы
- Добавляйте постеры для улучшения UX

### Формы

- Используйте `react-hook-form` для управления формами
- Добавляйте валидацию
- Показывайте состояния загрузки

## Git workflow

### Именование веток

- `feature/название-функции` - для новой функциональности
- `fix/описание-бага` - для исправления багов
- `docs/описание` - для документации
- `refactor/описание` - для рефакторинга

### Commit сообщения

Следуйте Convention для commit сообщений:

```
<type>: <short summary>
  │          │
  │          └─⫸ Краткое описание на английском, не более 50 символов
  │
  └─⫸ Тип: feat, fix, docs, style, refactor, test, chore, ci, build, revert
```

Примеры:

- `feat: add new feature`
- `fix: resolve bug in component`
- `docs: update README`
- `refactor: restructure component`

## Код-ревью

Перед созданием Pull Request:

1. Убедитесь, что все тесты проходят
2. Проверьте локально сборку проекта
3. Обновите документацию при необходимости
4. Опишите изменения в описании PR

## Инструменты разработки

### Pre-commit хуки

- Автоматический линтинг и форматирование
- Проверка commit сообщений
- Проверка типов

### ESLint

- Правила для React и TypeScript
- Правила доступности
- Правила форматирования

### Prettier

- Автоматическое форматирование кода
- Единый стиль по проекту

## Безопасность

- Не храните чувствительные данные в коде
- Используйте environment переменные для API ключей
- Обновляйте зависимости регулярно
- Проверяйте зависимости на уязвимости

## Производительность

- Мониторьте Lighthouse score
- Оптимизируйте изображения и видео
- Используйте lazy loading
- Минимизируйте bundle размер
- Избегайте лишних перерендеров
